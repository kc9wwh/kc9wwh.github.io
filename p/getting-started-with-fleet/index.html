<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Quick and easy setup with Docker!"><title>Getting started with Fleet</title><link rel=canonical href=https://kc9wwh.net/p/getting-started-with-fleet/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Getting started with Fleet"><meta property='og:description' content="Quick and easy setup with Docker!"><meta property='og:url' content='https://kc9wwh.net/p/getting-started-with-fleet/'><meta property='og:site_name' content='KC9WWH'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Fleet'><meta property='article:tag' content='Docker'><meta property='article:tag' content='Open Source'><meta property='article:tag' content='MySQL'><meta property='article:tag' content='Redis'><meta property='article:published_time' content='2025-06-09T12:33:38+00:00'><meta property='article:modified_time' content='2025-06-09T12:33:38+00:00'><meta property='og:image' content='https://kc9wwh.net/p/getting-started-with-fleet/cover.jpg'><meta name=twitter:title content="Getting started with Fleet"><meta name=twitter:description content="Quick and easy setup with Docker!"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://kc9wwh.net/p/getting-started-with-fleet/cover.jpg'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/me_hu_f983ae9d37eaea9d.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üéóÔ∏è</span></figure><div class=site-meta><h1 class=site-name><a href=/>KC9WWH</a></h1><h2 class=site-description>Father, Husband, Geek and Treky writing about random projects</h2></div></header><ol class=menu-social><li><a href='mailto:josh@kc9wwh.net?subject=Blog%20Contact%20Request' target=_blank title="Contact me" rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-message-chatbot"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 4a3 3 0 013 3v8a3 3 0 01-3 3h-5l-5 3v-3H6a3 3 0 01-3-3V7a3 3 0 013-3h12z"/><path d="M9.5 9h.01"/><path d="M14.5 9h.01"/><path d="M9.5 13a3.5 3.5.0 005 0"/></svg></a></li><li><a href=https://github.com/kc9wwh target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/jroskos/ target=_blank title=LinkedIn rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 10-4 0"/><path d="M3 7a4 4 0 014-4h10a4 4 0 014 4v10a4 4 0 01-4 4H7a4 4 0 01-4-4z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about-me/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About Me</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#why-docker-for-fleet-the-easy-button-approach>Why Docker for Fleet? The &ldquo;Easy Button&rdquo; Approach</a></li><li><a href=#prerequisites-whats-needed>Prerequisites: What&rsquo;s Needed</a></li><li><a href=#the-architecture-the-dockerized-fleet-stack>The Architecture: The Dockerized Fleet Stack</a></li><li><a href=#lets-get-building-step-by-step-with-docker-run>Let&rsquo;s Get Building! Step-by-Step with Docker Run</a><ol><li><a href=#step-1-prepare-host-directories>Step 1: Prepare Host Directories</a></li><li><a href=#step-2-launch-the-mysql-container>Step 2: Launch the MySQL Container</a></li><li><a href=#step-3-launch-the-redis-container>Step 3: Launch the Redis Container</a></li><li><a href=#step-4-launch-the-fleet-server>Step 4: Launch the Fleet Server</a></li><li><a href=#step-5-accessing-the-fleet-ui>Step 5: Accessing the Fleet UI</a></li></ol></li><li><a href=#bonus-round-enroll-your-first-osquery-agent>BONUS ROUND: Enroll Your First Osquery Agent!</a></li><li><a href=#cleaning-up-returning-to-shore>Cleaning Up: Returning to Shore</a></li><li><a href=#teaser-for-part-2---s3-storage>Teaser for Part 2 - S3 Storage!</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/getting-started-with-fleet/><img src=/p/getting-started-with-fleet/cover_hu_3fb57a57814caf0a.jpg srcset="/p/getting-started-with-fleet/cover_hu_3fb57a57814caf0a.jpg 800w, /p/getting-started-with-fleet/cover_hu_60490b1ad3dbdf3f.jpg 1600w" width=800 height=533 loading=lazy alt="Featured image of post Getting started with Fleet"></a></div><div class=article-details><header class=article-category><a href=/categories/tech/ style=background-color:#09f;color:#fff>Tech</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/getting-started-with-fleet/>Getting started with Fleet</a></h2><h3 class=article-subtitle>Quick and easy setup with Docker!</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 09, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><h1 id=introduction-unleash-the-power-of-fleet-with-docker>Introduction: Unleash the Power of Fleet with Docker!</h1><p>In today&rsquo;s complex digital landscape, achieving comprehensive endpoint visibility is paramount for robust security and efficient IT operations. Fleet, an open-source platform, leverages the power of osquery to provide deep insights into device fleets, covering Linux, macOS, Windows, and even Chromebooks. It&rsquo;s a versatile tool for vulnerability reporting, detection engineering, device management (MDM), and monitoring device health. However, setting up any powerful platform can sometimes seem daunting, particularly when considering resource allocation for testing or initial exploration.</p><p>This is where the magic of Docker comes into play. This guide demonstrates how to launch a fully functional Fleet environment‚Äîcomplete with its necessary database and caching layer‚Äîusing individual <code>docker run</code> commands. This approach offers a lightweight, fast, and isolated method to get hands-on with Fleet, making it ideal for IT and security professionals, DevOps engineers, or anyone curious to explore osquery management at scale with minimal upfront commitment.</p><h2 id=why-docker-for-fleet-the-easy-button-approach>Why Docker for Fleet? The &ldquo;Easy Button&rdquo; Approach</h2><p>Utilizing Docker for deploying Fleet presents several compelling advantages, especially for evaluation, development, or smaller-scale use cases:</p><ul><li><strong>Simplicity</strong>: Docker encapsulates each component of the Fleet stack (Fleet server, MySQL database, Redis cache) into its own container. This packaging simplifies deployment and dependency management.</li><li><strong>Speed</strong>: With a few Docker commands, the entire stack can be provisioned and running in minutes. Similarly, tearing down the environment is just as quick, leaving the host system clean.</li><li><strong>Isolation</strong>: Containers run in isolated environments, preventing conflicts with other software or configurations on the host machine. This is perfect for testing without impacting existing setups.</li><li><strong>Resource Efficiency</strong>: Docker containers are generally more lightweight than full virtual machines. This makes it feasible to run Fleet on a local machine or a small server for testing purposes.</li><li><strong>Consistency</strong>: Docker ensures that the Fleet environment is consistent across different machines, from a developer&rsquo;s laptop to a test server.</li></ul><h2 id=prerequisites-whats-needed>Prerequisites: What&rsquo;s Needed</h2><p>To embark on this Dockerized Fleet journey, only a few items are necessary:</p><ul><li>Docker Engine installed on the host system.</li><li>Basic familiarity with command-line interface (CLI) operations.</li><li>A spirit of exploration to dive into the capabilities of Fleet!</li></ul><h2 id=the-architecture-the-dockerized-fleet-stack>The Architecture: The Dockerized Fleet Stack</h2><p>The setup will consist of the following components, all running in separate Docker containers:</p><ol><li><code>fleetdm/fleet:latest</code>: The core Fleet server application.</li><li><code>mysql:8.0.36</code>: A MySQL database instance to store Fleet&rsquo;s metadata.</li><li><code>redis</code>: A Redis instance used by Fleet for caching and managing live query sessions.</li></ol><p>These containers will communicate over the host network, so it&rsquo;s important to ensure the IP address used for configuration is accessible from the containers.</p><h2 id=lets-get-building-step-by-step-with-docker-run>Let&rsquo;s Get Building! Step-by-Step with Docker Run</h2><p>This section walks through the commands needed to bring the Fleet stack to life.</p><h3 id=step-1-prepare-host-directories>Step 1: Prepare Host Directories</h3><p>Before launching the containers, you need to create the directories on your host machine that will be used for persistent storage. This ensures your data isn&rsquo;t lost when containers are stopped or removed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create directories for MySQL</span>
</span></span><span class=line><span class=cl>mkdir -p /mnt/user/appdata/mysql/<span class=o>{</span>data,logs,conf.d,initdb<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create directory for Fleet</span>
</span></span><span class=line><span class=cl>mkdir -p /mnt/user/appdata/fleetdm
</span></span></code></pre></td></tr></table></div></div><h3 id=step-2-launch-the-mysql-container>Step 2: Launch the MySQL Container</h3><p>Run the following command to start the MySQL database. This command maps ports and volumes for data persistence and logging.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name<span class=o>=</span><span class=s1>&#39;MySQL&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --net<span class=o>=</span><span class=s1>&#39;bridge&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --pids-limit <span class=m>2048</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --privileged<span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>TZ</span><span class=o>=</span><span class=s2>&#34;America/Chicago&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;MYSQL_DATABASE&#39;</span><span class=o>=</span><span class=s1>&#39;fleet&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;MYSQL_USER&#39;</span><span class=o>=</span><span class=s1>&#39;fleet-user&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;MYSQL_PASSWORD&#39;</span><span class=o>=</span><span class=s1>&#39;fleet-user-password&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;MYSQL_ROOT_PASSWORD&#39;</span><span class=o>=</span><span class=s1>&#39;super-secret-password&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p <span class=s1>&#39;3306:3306/tcp&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=s1>&#39;/mnt/user/appdata/mysql/data&#39;</span>:<span class=s1>&#39;/var/lib/mysql&#39;</span>:<span class=s1>&#39;rw&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=s1>&#39;/mnt/user/appdata/mysql/logs&#39;</span>:<span class=s1>&#39;/var/log/mysql&#39;</span>:<span class=s1>&#39;rw&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=s1>&#39;/mnt/user/appdata/mysql/conf.d&#39;</span>:<span class=s1>&#39;/etc/mysql/conf.d&#39;</span>:<span class=s1>&#39;rw&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=s1>&#39;/mnt/user/appdata/mysql/initdb&#39;</span>:<span class=s1>&#39;/docker-entrypoint-initdb.d&#39;</span>:<span class=s1>&#39;rw&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --memory<span class=o>=</span>2G <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --restart<span class=o>=</span>unless-stopped <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s1>&#39;mysql:8.0.36&#39;</span> mysqld <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --log-error<span class=o>=</span>/var/log/mysql/error.log
</span></span></code></pre></td></tr></table></div></div><h3 id=step-3-launch-the-redis-container>Step 3: Launch the Redis Container</h3><p>Next, start the Redis container. It&rsquo;s a simpler setup, primarily needing a port mapping.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name<span class=o>=</span><span class=s1>&#39;Redis&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --net<span class=o>=</span><span class=s1>&#39;bridge&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --pids-limit <span class=m>2048</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>TZ</span><span class=o>=</span><span class=s2>&#34;America/Chicago&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p <span class=s1>&#39;6379:6379/tcp&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s1>&#39;redis&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=step-4-launch-the-fleet-server>Step 4: Launch the Fleet Server</h3><p>Finally, launch the Fleet server. This command is the most extensive, as it includes configuration details to connect to the MySQL and Redis containers.</p><p><strong>Note:</strong> Make sure to replace <code>192.168.50.129</code> in the <code>FLEET_MYSQL_ADDRESS</code> and <code>FLEET_REDIS_ADDRESS</code> variables with the actual IP address of your Docker host.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name<span class=o>=</span><span class=s1>&#39;fleetdm&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --net<span class=o>=</span><span class=s1>&#39;bridge&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --pids-limit <span class=m>2048</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>TZ</span><span class=o>=</span><span class=s2>&#34;America/Chicago&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_MYSQL_ADDRESS&#39;</span><span class=o>=</span><span class=s1>&#39;192.168.50.129:3306&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_MYSQL_DATABASE&#39;</span><span class=o>=</span><span class=s1>&#39;fleet&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_MYSQL_USERNAME&#39;</span><span class=o>=</span><span class=s1>&#39;fleet-user&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_MYSQL_PASSWORD&#39;</span><span class=o>=</span><span class=s1>&#39;fleet-user-password&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_REDIS_ADDRESS&#39;</span><span class=o>=</span><span class=s1>&#39;192.168.50.129:6379&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_OSQUERY_STATUS_LOG_PLUGIN&#39;</span><span class=o>=</span><span class=s1>&#39;filesystem&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_OSQUERY_RESULT_LOG_PLUGIN&#39;</span><span class=o>=</span><span class=s1>&#39;filesystem&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_FILESYSTEM_STATUS_LOG_FILE&#39;</span><span class=o>=</span><span class=s1>&#39;/mnt/data/logs/status.log&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_FILESYSTEM_RESULT_LOG_FILE&#39;</span><span class=o>=</span><span class=s1>&#39;/mnt/data/logs/result.log&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_FILESYSTEM_AUDIT_LOG_FILE&#39;</span><span class=o>=</span><span class=s1>&#39;/mnt/data/logs/audit.log&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_FILESYSTEM_ENABLE_LOG_ROTATION&#39;</span><span class=o>=</span><span class=s1>&#39;true&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_ACTIVITY_ENABLE_AUDIT_LOG&#39;</span><span class=o>=</span><span class=s1>&#39;true&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_ACTIVITY_AUDIT_LOG_PLUGIN&#39;</span><span class=o>=</span><span class=s1>&#39;filesystem&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_LOGGING_DEBUG&#39;</span><span class=o>=</span><span class=s1>&#39;true&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=s1>&#39;FLEET_SERVER_TLS&#39;</span><span class=o>=</span><span class=s1>&#39;false&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p <span class=s1>&#39;8083:8080/tcp&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p <span class=s1>&#39;8443:443/tcp&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=s1>&#39;/mnt/user/appdata/fleetdm&#39;</span>:<span class=s1>&#39;/mnt/data&#39;</span>:<span class=s1>&#39;rw&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s1>&#39;fleetdm/fleet:latest&#39;</span> sh <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -c <span class=s2>&#34;fleet prepare db &amp;&amp; fleet serve&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>To monitor the logs, especially for the Fleet server, you can run:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker logs -f fleetdm
</span></span></code></pre></td></tr></table></div></div><p>Look for messages indicating successful database migrations and that the server has started.</p><h3 id=step-5-accessing-the-fleet-ui>Step 5: Accessing the Fleet UI</h3><p>Once the containers are running, the Fleet UI should be accessible. Open a web browser and navigate to:</p><blockquote><p>http://&lt;YOUR_DOCKER_HOST_IP>:8083</p></blockquote><p>The first time you access Fleet, a setup screen will appear to create an administrator account. Follow the on-screen prompts. After setting up the admin user, you will be presented with the Fleet dashboard.</p><h2 id=bonus-round-enroll-your-first-osquery-agent>BONUS ROUND: Enroll Your First Osquery Agent!</h2><p>A Fleet server is most useful when it has agents reporting in. You can run an osquery agent as another Docker container.</p><ol><li><p><strong>Obtain Enroll Secret:</strong></p><ul><li>In the Fleet UI, navigate to <strong>Hosts</strong> and click the <strong>Add hosts</strong> button.</li><li>Fleet will display an enroll secret. Copy this secret for the next step.</li></ul></li><li><p><strong>Run the Osquery Agent Container:</strong>
Open a terminal and execute the following command.</p><ul><li>Replace <code>YOUR_ENROLL_SECRET_FROM_FLEET_UI</code> with the actual secret from the UI.</li><li>Replace <code>192.168.50.129</code> with your Docker host&rsquo;s IP address.</li></ul></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>ENROLL_SECRET</span><span class=o>=</span><span class=s2>&#34;YOUR_ENROLL_SECRET_FROM_FLEET_UI&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>FLEET_URL</span><span class=o>=</span><span class=s2>&#34;192.168.50.129:8083&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker run -d --name osquery-agent-test <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  osquery/osquery:latest osqueryd <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --enroll_secret<span class=o>=</span><span class=si>${</span><span class=nv>ENROLL_SECRET</span><span class=si>}</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --tls_hostname<span class=o>=</span><span class=si>${</span><span class=nv>FLEET_URL</span><span class=si>}</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --enroll_tls_endpoint<span class=o>=</span>/api/osquery/enroll <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --config_plugin<span class=o>=</span>tls <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --config_tls_endpoint<span class=o>=</span>/api/osquery/config <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --logger_plugin<span class=o>=</span>tls <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --logger_tls_endpoint<span class=o>=</span>/api/osquery/log <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --disable_distributed<span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --distributed_plugin<span class=o>=</span>tls <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --distributed_tls_read_endpoint<span class=o>=</span>/api/osquery/distributed/read <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --distributed_tls_write_endpoint<span class=o>=</span>/api/osquery/distributed/write <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --host_identifier<span class=o>=</span>uuid <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --force<span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --verbose<span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --tls_allow_unsafe<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></td></tr></table></div></div><p>After a few moments, the new host should appear on the <strong>Hosts</strong> page in the Fleet UI.</p><h2 id=cleaning-up-returning-to-shore>Cleaning Up: Returning to Shore</h2><p>When you&rsquo;re finished exploring, you can cleanly remove the entire Fleet stack.</p><ol><li><p><strong>Stop the Containers:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker stop MySQL Redis fleetdm osquery-agent-test
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Remove the Containers:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker rm MySQL Redis fleetdm osquery-agent-test
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>(Optional) Remove Host Directories:</strong>
If you want to remove all persisted data, you can delete the directories you created earlier:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rm -rf /mnt/user/appdata/mysql
</span></span><span class=line><span class=cl>rm -rf /mnt/user/appdata/fleetdm
</span></span></code></pre></td></tr></table></div></div></li></ol><p>And just like that, the system is back to its original state. This ease of teardown is invaluable for experimentation.</p><h2 id=teaser-for-part-2---s3-storage>Teaser for Part 2 - S3 Storage!</h2><p>Feeling adventurous? Ready to take this Fleet setup to the next frontier? This Dockerized deployment is fantastic for getting started, but for more persistent or larger-scale scenarios, especially involving log retention and file carving, a more robust storage solution is beneficial.</p><p><strong>Stay Tuned!</strong> In the next article in this series, the Fleet deployment will be supercharged by configuring <strong>S3-compatible object storage (using MinIO, all in Docker, of course!)</strong> for scalable log and file carve storage. Imagine effortlessly storing and managing extensive endpoint data!</p><p>Catch ya on the next project!</p><p>Josh üññ</p><blockquote><p>Photo by <a class=link href="https://unsplash.com/@afgprogrammer?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target=_blank rel=noopener>Mohammad Rahmani</a> on <a class=link href=https://unsplash.com target=_blank rel=noopener>Unsplash</a></p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/fleet/>Fleet</a>
<a href=/tags/docker/>Docker</a>
<a href=/tags/open-source/>Open Source</a>
<a href=/tags/mysql/>MySQL</a>
<a href=/tags/redis/>Redis</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/dont-forget-to-apply-updates-to-your-db/><div class=article-image><img src=/p/dont-forget-to-apply-updates-to-your-db/cover.4bcdfd25c83dfef043b8d2d4cfd3ccc1_hu_b6abf1b064256240.jpg width=250 height=150 loading=lazy alt="Featured image of post Don't Forget to Apply Updates to your DB" data-hash="md5-S839Jcg9/vBDuNLUz9PMwQ=="></div><div class=article-details><h2 class=article-title>Don't Forget to Apply Updates to your DB</h2></div></a></article><article class=has-image><a href=/p/running-commands-as-the-active-user-on-linux-with-fleet/><div class=article-image><img src=/p/running-commands-as-the-active-user-on-linux-with-fleet/cover.d22b0a1cde9be772d6636cc72c3aed2b_hu_9b93a8bf05372786.jpg width=250 height=150 loading=lazy alt="Featured image of post Running Commands as the Active User on Linux with Fleet" data-hash="md5-0isKHN6b53LWY2zHLDrtKw=="></div><div class=article-details><h2 class=article-title>Running Commands as the Active User on Linux with Fleet</h2></div></a></article><article class=has-image><a href=/p/starting-my-journey-with-hugo/><div class=article-image><img src=/p/starting-my-journey-with-hugo/cover.b7e0e757f41bc6e4df9bde33eef50dce_hu_13d5e2f17ea478f2.jpg width=250 height=150 loading=lazy alt="Featured image of post Starting my journey with Hugo" data-hash="md5-t+DnV/QbxuTfm94z7vUNzg=="></div><div class=article-details><h2 class=article-title>Starting my journey with Hugo</h2></div></a></article><article class=has-image><a href=/p/the-first-issue-with-starting-a-blog/><div class=article-image><img src=/p/the-first-issue-with-starting-a-blog/cover.610189ced74c30c4ec18e7c95924177f_hu_e09648181488dfac.jpg width=250 height=150 loading=lazy alt="Featured image of post The First Issue with Starting a Blog" data-hash="md5-YQGJztdMMMTsGOfJWSQXfw=="></div><div class=article-details><h2 class=article-title>The First Issue with Starting a Blog</h2></div></a></article><article class=has-image><a href=/p/the-start-of-a-journey/><div class=article-image><img src=/p/the-start-of-a-journey/cover.1d5447fa099335e8051a434e5a7c6851_hu_9e4cce62fe2e4985.jpg width=250 height=150 loading=lazy alt="Featured image of post The start of a journey" data-hash="md5-HVRH+gmTNegFGkNOWnxoUQ=="></div><div class=article-details><h2 class=article-title>The start of a journey</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//kc9wwh.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 KC9WWH</section><section class=powerby>Joshua Roskos<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script async data-id=101476463 src=//static.getclicky.com/js></script></body></html>